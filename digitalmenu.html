<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>المنيو الرقمي - جو كرسبي</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* GLOBAL STYLES */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  color: white;
  min-height: 100vh;
  padding: 20px;
}

/* HEADER */
.restaurant-header {
  text-align: center;
  padding: 20px 0;
  margin-bottom: 20px;
}

.restaurant-logo {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  margin: 0 auto 15px;
  overflow: hidden;
  border: 4px solid #00a884;
  box-shadow: 0 5px 20px rgba(0, 168, 132, 0.4);
}

.restaurant-logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.restaurant-header h1 {
  font-size: 32px;
  margin-bottom: 8px;
  color: white;
}

.restaurant-header p {
  color: #8696a0;
  font-size: 16px;
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.5;
}

/* MENU SECTION */
.menu-section {
  max-width: 800px;
  margin: 0 auto 30px;
}

.menu-section h2 {
  font-size: 24px;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(0, 168, 132, 0.5);
  display: flex;
  align-items: center;
  gap: 10px;
}

/* MENU ITEMS */
.menu-items {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.menu-item-card {
  background: rgba(31, 44, 52, 0.9);
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.menu-item-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
}

.menu-item-image {
  height: 180px;
  overflow: hidden;
}

.menu-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.menu-item-card:hover .menu-item-image img {
  transform: scale(1.05);
}

.menu-item-content {
  padding: 20px;
}

.menu-item-name {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 8px;
  color: white;
}

.menu-item-desc {
  color: #8696a0;
  font-size: 14px;
  margin-bottom: 15px;
  line-height: 1.4;
  min-height: 40px;
}

.menu-item-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.menu-item-price {
  color: #00a884;
  font-size: 20px;
  font-weight: 700;
}

/* QUANTITY CONTROLS */
.quantity-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

.quantity-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(0, 168, 132, 0.1);
  border: 2px solid #00a884;
  color: #00a884;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
}

.quantity-btn:hover {
  background: rgba(0, 168, 132, 0.2);
  transform: scale(1.1);
}

.quantity-btn.disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.quantity-display {
  min-width: 40px;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
  color: white;
}

/* CART SUMMARY */
.cart-summary {
  background: rgba(31, 44, 52, 0.9);
  border-radius: 15px;
  padding: 25px;
  max-width: 800px;
  margin: 0 auto 30px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  border: 2px solid rgba(0, 168, 132, 0.3);
}

.cart-summary h3 {
  font-size: 22px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  color: white;
}

.cart-items {
  margin-bottom: 20px;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.cart-item:last-child {
  border-bottom: none;
}

.cart-item-name {
  font-size: 16px;
  flex: 1;
}

.cart-item-quantity {
  color: #8696a0;
  font-size: 14px;
  margin: 0 15px;
}

.cart-item-price {
  color: #00a884;
  font-weight: 600;
  font-size: 16px;
  min-width: 80px;
  text-align: left;
}

.cart-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  border-top: 2px solid rgba(0, 168, 132, 0.5);
  margin-top: 15px;
}

.cart-total-label {
  font-size: 20px;
  font-weight: 700;
  color: white;
}

.cart-total-amount {
  color: #00a884;
  font-size: 28px;
  font-weight: 700;
}

.empty-cart {
  text-align: center;
  padding: 40px 20px;
  color: #8696a0;
  font-size: 18px;
}

.empty-cart i {
  font-size: 48px;
  margin-bottom: 15px;
  opacity: 0.5;
}

/* ACTION BUTTONS */
.action-buttons {
  max-width: 800px;
  margin: 0 auto;
  display: flex;
  gap: 15px;
}

.action-btn {
  flex: 1;
  padding: 18px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  border: none;
  text-decoration: none;
}

.back-btn {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-3px);
}

.complete-order-btn {
  background: linear-gradient(135deg, #00a884 0%, #008f70 100%);
  color: white;
  box-shadow: 0 5px 20px rgba(0, 168, 132, 0.4);
}

.complete-order-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 168, 132, 0.5);
}

.complete-order-btn.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  .menu-items {
    grid-template-columns: 1fr;
  }
  
  .action-buttons {
    flex-direction: column;
  }
  
  .restaurant-header h1 {
    font-size: 28px;
  }
  
  .restaurant-logo {
    width: 100px;
    height: 100px;
  }
}

@media (max-width: 480px) {
  body {
    padding: 15px;
  }
  
  .restaurant-header h1 {
    font-size: 24px;
  }
  
  .menu-section h2 {
    font-size: 20px;
  }
  
  .menu-item-name {
    font-size: 16px;
  }
  
  .cart-summary {
    padding: 20px;
  }
}
</style>
</head>
<body>

<div class="restaurant-header">
  <div class="restaurant-logo">
    <img src="images/profile.png" alt="جو كرسبي">
  </div>
  <h1>جو كرسبي</h1>
  <p>أشهى الوجبات المقرمشة والوجبات السريعة بجودة عالية</p>
  <p style="margin-top: 10px; color: #00a884; font-size: 14px;"><i class="fas fa-star"></i> 4.8 ★ (950 تقييم)</p>
</div>

<div class="menu-section">
  <h2><i class="fas fa-utensils"></i> قائمة الطعام</h2>
  
  <div class="menu-items" id="menuItems">
    <!-- Menu items will be loaded by JavaScript -->
  </div>
</div>

<div class="cart-summary">
  <h3><i class="fas fa-shopping-bag"></i> طلبك</h3>
  <div class="cart-items" id="cartItems">
    <div class="empty-cart" id="emptyCart">
      <i class="fas fa-shopping-basket"></i>
      <p>لم تقم بإضافة أي منتجات بعد</p>
    </div>
  </div>
  <div class="cart-total" id="cartTotal" style="display: none;">
    <div class="cart-total-label">الإجمالي</div>
    <div class="cart-total-amount" id="totalAmount">0 ريال</div>
  </div>
</div>

<div class="action-buttons">
  <a href="index.html" class="action-btn back-btn">
    <i class="fas fa-arrow-right"></i> العودة للواتساب
  </a>
  <button class="action-btn complete-order-btn disabled" id="completeOrderBtn">
    <i class="fas fa-check-circle"></i> إكمال الطلب
  </button>
</div>

<script>
// Menu items (same as in index.html)
const menuItems = [
  {
    id: 1,
    name: "وجبة لشخصين",
    description: "وجبة خاصة لشخصين مع مشروبات",
    price: 85,
    image: "images/item1.png"
  },
  {
    id: 2,
    name: "وجبة جو دجاج",
    description: "وجبة دجاج جو المقرمشة",
    price: 65,
    image: "images/item2.png"
  },
  {
    id: 3,
    name: "وجبة بينوي",
    description: "وجبة بينوي اللذيذة مع أصناف متنوعة",
    price: 75,
    image: "images/item3.png"
  },
  {
    id: 4,
    name: "وجبة الاحتفال",
    description: "وجبة احتفالية كبيرة مع جميع الأصناف",
    price: 120,
    image: "images/item4.png"
  },
  {
    id: 5,
    name: "وجبة جو دبل رويال",
    description: "وجبة جو رويال مزدوجة وفاخرة",
    price: 110,
    image: "images/item5.png"
  },
  {
    id: 6,
    name: "الوجبة القيمة",
    description: "وجبة اقتصادية مع قيمة ممتازة",
    price: 55,
    image: "images/item6.png"
  },
  {
    id: 7,
    name: "رويال ميل",
    description: "الوجبة الملكية مع جميع الإضافات",
    price: 95,
    image: "images/item7.png"
  },
  {
    id: 8,
    name: "وليمة أرز الدجاج الذهبي",
    description: "وليمة دجاج مع أرز ذهبي لذيذ",
    price: 130,
    image: "images/item8.png"
  },
  {
    id: 9,
    name: "وجبة السعادة",
    description: "وجبة تجلب السعادة مع أصناف مميزة",
    price: 70,
    image: "images/item9.png"
  },
  {
    id: 10,
    name: "باكيت تندر مع الجرافي",
    description: "باكيت تندر دجاج مع صوص الجرافي الخاص",
    price: 80,
    image: "images/item10.png"
  }
];

// Cart state
let cart = {};

// Initialize the menu
function initMenu() {
  const menuItemsContainer = document.getElementById('menuItems');
  
  menuItems.forEach(item => {
    const itemElement = document.createElement('div');
    itemElement.className = 'menu-item-card';
    itemElement.innerHTML = `
      <div class="menu-item-image">
        <img src="${item.image}" alt="${item.name}" onerror="this.src='images/item1.png'">
      </div>
      <div class="menu-item-content">
        <div class="menu-item-name">${item.name}</div>
        <div class="menu-item-desc">${item.description}</div>
        <div class="menu-item-footer">
          <div class="menu-item-price">${item.price} ريال</div>
          <div class="quantity-controls">
            <button class="quantity-btn minus-btn" onclick="updateQuantity(${item.id}, -1)">
              <i class="fas fa-minus"></i>
            </button>
            <div class="quantity-display" id="qty-${item.id}">0</div>
            <button class="quantity-btn plus-btn" onclick="updateQuantity(${item.id}, 1)">
              <i class="fas fa-plus"></i>
            </button>
          </div>
        </div>
      </div>
    `;
    
    menuItemsContainer.appendChild(itemElement);
  });
  
  updateCartDisplay();
}

// Update item quantity
function updateQuantity(itemId, change) {
  if (!cart[itemId]) {
    cart[itemId] = 0;
  }
  
  const newQuantity = cart[itemId] + change;
  
  if (newQuantity < 0) return;
  
  cart[itemId] = newQuantity;
  
  // Update quantity display
  const qtyDisplay = document.getElementById(`qty-${itemId}`);
  if (qtyDisplay) {
    qtyDisplay.textContent = newQuantity;
    
    // Update button states
    const card = qtyDisplay.closest('.menu-item-card');
    const minusBtn = card.querySelector('.minus-btn');
    if (minusBtn) {
      minusBtn.classList.toggle('disabled', newQuantity === 0);
    }
  }
  
  updateCartDisplay();
}

// Update cart display
function updateCartDisplay() {
  const cartItemsContainer = document.getElementById('cartItems');
  const emptyCartElement = document.getElementById('emptyCart');
  const cartTotalElement = document.getElementById('cartTotal');
  const totalAmountElement = document.getElementById('totalAmount');
  const completeOrderBtn = document.getElementById('completeOrderBtn');
  
  // Calculate cart items and total
  let itemsHTML = '';
  let total = 0;
  let itemCount = 0;
  
  Object.keys(cart).forEach(itemId => {
    const quantity = cart[itemId];
    if (quantity > 0) {
      const item = menuItems.find(i => i.id == itemId);
      if (item) {
        const itemTotal = item.price * quantity;
        total += itemTotal;
        itemCount += quantity;
        
        itemsHTML += `
          <div class="cart-item">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-quantity">${quantity} × ${item.price} ريال</div>
            <div class="cart-item-price">${itemTotal} ريال</div>
          </div>
        `;
      }
    }
  });
  
  // Show/hide empty cart message
  if (itemCount === 0) {
    emptyCartElement.style.display = 'block';
    cartTotalElement.style.display = 'none';
    completeOrderBtn.classList.add('disabled');
    completeOrderBtn.disabled = true;
  } else {
    emptyCartElement.style.display = 'none';
    cartTotalElement.style.display = 'flex';
    totalAmountElement.textContent = `${total} ريال`;
    completeOrderBtn.classList.remove('disabled');
    completeOrderBtn.disabled = false;
  }
  
  // Update cart items
  if (itemsHTML) {
    cartItemsContainer.innerHTML = itemsHTML + cartItemsContainer.innerHTML;
  }
}

// Complete order and redirect to WhatsApp flow
function completeOrder() {
  if (Object.keys(cart).length === 0) return;
  
  // Prepare order data
  const orderData = {
    source: 'digitalmenu',
    items: {},
    total: 0
  };
  
  let itemCount = 0;
  Object.keys(cart).forEach(itemId => {
    const quantity = cart[itemId];
    if (quantity > 0) {
      const item = menuItems.find(i => i.id == itemId);
      if (item) {
        orderData.items[itemId] = quantity;
        orderData.total += item.price * quantity;
        itemCount += quantity;
      }
    }
  });
  
  if (itemCount === 0) return;
  
  // Create URL parameters
  const params = new URLSearchParams();
  params.append('source', 'digitalmenu');
  params.append('items', JSON.stringify(orderData.items));
  params.append('total', orderData.total);
  params.append('itemCount', itemCount);
  
  // Redirect to WhatsApp flow
  window.location.href = `index.html?${params.toString()}`;
}

// Initialize
window.onload = function() {
  initMenu();
  
  // Add event listener to complete order button
  document.getElementById('completeOrderBtn').addEventListener('click', completeOrder);
};
</script>
</body>
</html>
